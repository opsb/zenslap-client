#!/usr/bin/env ruby

def valid_app?(app)
  `heroku config --app #{app}`
  $?.to_i == 0
end

def app
  app=%x{ git config zenslap.zenslap }  
  while app == ""
    puts "\nEnter the name of the zenslap app"
    unvalidated_app = STDIN.gets.chomp
    if unvalidated_app == ""
      # retry
    elsif valid_app? unvalidated_app
      system "git config zenslap.zenslap #{unvalidated_app}"      
      app = unvalidated_app
    end
  end
  app
end

exec "heroku #{ARGV.join("")} --app #{app}"